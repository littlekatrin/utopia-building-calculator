var _global_lso;function _ecfv(a){_global_lso=a;var b=$("#myswf");if(b&&b.parentNode){b.parentNode.removeChild(b)}}function CC(param_config){config=$.extend({media_path:""},param_config);var self=this;this._ec={};this.get=function(name,call_back,dont_reset){self._query_storage(name,call_back,undefined,0,dont_reset)};this.set=function(name,value,call_back){self._query_storage(name,call_back,value,0,true)};this._query_storage=function(name,call_back,value,i,dont_reset){if(i==0){self._database_storage(name,value);self._lso(name,value);self._ec.userData=self._userdata(name,value);self._ec.cookieData=self._cookie(name,value);self._ec.localData=self._local_storage(name,value);self._ec.globalData=self._global_storage(name,value);self._ec.sessionData=self._session_storage(name,value);self._ec.windowData=self._window(name,value)}if((typeof _global_lso=="undefined"||(window.openDatabase&&typeof self._ec.dbData=="undefined"))&&i<10){i++;setTimeout(function(){self._query_storage(name,call_back,value,i,dont_reset)},50);return}if(typeof value=="undefined"){self._ec.lsoData=self.getFromStr(name,_global_lso);_global_lso=undefined;var tmpec=self._ec;self._ec={};var candidates=new Array();var best_num=0;var best_candidate;for(var item in tmpec){if(typeof tmpec[item]!="undefined"&&typeof tmpec[item]!="null"&&tmpec[item]!=""&&tmpec[item]!="null"&&tmpec[item]!="undefined"&&tmpec[item]!=null){candidates[tmpec[item]]=typeof candidates[tmpec[item]]=="undefined"?1:candidates[tmpec[item]]+1}}for(var item in candidates){if(candidates[item]>best_num){best_num=candidates[item];best_candidate=item}}value=best_candidate}if(typeof dont_reset=="undefined"||dont_reset==false){self.set(name,value,call_back);return}if(typeof call_back=="function"){call_back(value)}};this._window=function(name,value){try{if(typeof(value)!="undefined"){window.name=this.ec_replace(window.name,name,value)}else{return this.getFromStr(name,window.name)}}catch(e){}};this._session_storage=function(name,value){try{if(window.sessionStorage){if(typeof(value)!="undefined"){sessionStorage.setItem(name,value)}else{return sessionStorage.getItem(name)}}}catch(e){}};this._global_storage=function(name,value){if(window.globalStorage){var host=this.getHost();try{if(typeof(value)!="undefined"){eval("globalStorage[host]."+name+" = value")}else{return eval("globalStorage[host]."+name)}}catch(e){}}};this._local_storage=function(name,value){try{if(window.localStorage){if(typeof(value)!="undefined"){localStorage.setItem(name,value)}else{return localStorage.getItem(name)}}}catch(e){}};this._cookie=function(name,value){if(typeof(value)!="undefined"){document.cookie=name+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/";document.cookie=name+"="+value+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/"}else{return this.getFromStr(name,document.cookie)}};this._userdata=function(name,value){try{var elm=this.createElem("div","userdata_el",1);elm.style.behavior="url(#default#userData)";if(typeof(value)!="undefined"){elm.setAttribute(name,value);elm.save(name)}else{elm.load(name);return elm.getAttribute(name)}}catch(e){}};this._database_storage=function(name,value){try{if(window.openDatabase){var database=window.openDatabase("sqlite_e","","e",1024*1024);if(typeof(value)!="undefined"){database.transaction(function(tx){tx.executeSql("CREATE TABLE IF NOT EXISTS cache(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, value TEXT NOT NULL, UNIQUE (name))",[],function(tx,rs){},function(tx,err){});tx.executeSql("INSERT OR REPLACE INTO cache(name, value) VALUES(?, ?)",[name,value],function(tx,rs){self._ec.dbData=""},function(tx,err){self._ec.dbData=""})})}else{database.transaction(function(tx){tx.executeSql("SELECT value FROM cache WHERE name=?",[name],function(tx,result1){if(result1.rows.length>=1){self._ec.dbData=result1.rows.item(0)["value"]}else{self._ec.dbData=""}},function(tx,err){})})}}}catch(e){}};this._lso=function(name,value){var div=document.getElementById("swfcontainer");if(!div){div=document.createElement("div");div.setAttribute("id","swfcontainer");document.body.appendChild(div)}var flashvars={};if(typeof value!="undefined"){flashvars.everdata=name+"="+value}var params={};params.swliveconnect="true";var attributes={};attributes.id="myswf";attributes.name="myswf";swfobject.embedSWF(config.media_path+"ec.swf","swfcontainer","1","1","9.0.0",false,flashvars,params,attributes)};this.getFromStr=function(name,text){if(typeof text!="string"){return}var nameEQ=name+"=";var ca=text.split(/[;&]/);for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}};this.ec_replace=function(str,key,value){if(str.indexOf("&"+key+"=")>-1||str.indexOf(key+"=")==0){var idx=str.indexOf("&"+key+"=");if(idx==-1){idx=str.indexOf(key+"=")}var end=str.indexOf("&",idx+1);var newstr;if(end!=-1){newstr=str.substr(0,idx)+str.substr(end+(idx?0:1))+"&"+key+"="+value}else{newstr=str.substr(0,idx)+"&"+key+"="+value}return newstr}else{return str+"&"+key+"="+value}};this.getHost=function(){var domain=document.location.host;if(domain.indexOf("www.")==0){domain=domain.replace("www.","")}return domain};this.createElem=function(type,name,append){var el;if(typeof name!="undefined"&&document.getElementById(name)){el=document.getElementById(name)}else{el=document.createElement(type)}el.style.visibility="hidden";el.style.position="absolute";if(name){el.setAttribute("id",name)}if(append){document.body.appendChild(el)}return el}};